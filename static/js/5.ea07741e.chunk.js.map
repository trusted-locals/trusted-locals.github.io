{"version":3,"sources":["pages/RegistrationPage.tsx","components/PasswordInput.tsx","utils/fetch.ts"],"names":["containerStyles","marginTop","RegistrationPage","useState","name","setName","email","setEmail","password","setPassword","isPasswordVisible","setIsPasswordVisible","isLoading","setIsLoading","errorMessage","setErrorMessage","maxWidth","onSubmit","e","preventDefault","fetch","fetchOptions","body","JSON","stringify","country","method","onStart","onSuccess","data","onFailure","onEnd","htmlFor","id","isRequired","maxLength","minLength","onChange","target","value","type","variantColor","status","variant","PasswordInput","size","width","aria-label","height","onClick","path","options","window","headers","then","response","json","ok","catch","error","finally"],"mappings":"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","file":"static/js/5.ea07741e.chunk.js","sourcesContent":["import React, { FC, useState } from 'react';\nimport { Alert, AlertIcon, Box, Button, FormControl, FormLabel, Input } from '@chakra-ui/core';\n\nimport { PasswordInput } from '../components/PasswordInput';\n\nimport { fetch } from '../utils/fetch';\n\nconst MIN_LENGTH_USERNAME = 3;\nconst MAX_LENGTH_USERNAME = 16;\n\nconst containerStyles = {\n  marginTop: 4,\n};\n\nexport const RegistrationPage: FC = () => {\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  const [isPasswordVisible, setIsPasswordVisible] = useState(false);\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n\n  return (\n    <Box maxWidth='500px'>\n      <form\n        onSubmit={(e): void => {\n          e.preventDefault();\n\n          fetch('/user', {\n            fetchOptions: {\n              body: JSON.stringify({\n                // TODO: Country/City in registration flow\n                country: 'test-country',\n                email,\n                name,\n                password,\n              }),\n              method: 'POST',\n            },\n            onStart: () => {\n              setIsLoading(true);\n            },\n            // eslint-disable-next-line\n            onSuccess: (data: { success: boolean }) => {\n              debugger;\n            },\n            onFailure: ({ errorMessage }) => {\n              debugger;\n              setErrorMessage(errorMessage);\n            },\n            onEnd: () => {\n              setIsLoading(false);\n            },\n          });\n        }}\n      >\n        <FormControl {...containerStyles}>\n          <FormLabel htmlFor='username'>Username</FormLabel>\n          <Input\n            id='username'\n            isRequired\n            maxLength={MAX_LENGTH_USERNAME}\n            minLength={MIN_LENGTH_USERNAME}\n            // @ts-ignore\n            onChange={({ target }): void => {\n              setName(target.value);\n            }}\n            type='text'\n            value={name}\n          />\n        </FormControl>\n        <FormControl {...containerStyles}>\n          <FormLabel htmlFor='email'>Email address</FormLabel>\n          <Input\n            isRequired\n            id='email'\n            // @ts-ignore\n            onChange={({ target }): void => {\n              setEmail(target.value);\n            }}\n            type='email'\n            value={email}\n          />\n        </FormControl>\n        <PasswordInput\n          containerStyles={containerStyles}\n          isPasswordVisible={isPasswordVisible}\n          password={password}\n          setIsPasswordVisible={setIsPasswordVisible}\n          setPassword={setPassword}\n        />\n        <Button isLoading={isLoading} marginTop={6} variantColor='teal' type='submit'>\n          Register\n        </Button>\n      </form>\n      {errorMessage && (\n        <Alert marginTop={6} status='error' variant='left-accent'>\n          <AlertIcon />\n          {errorMessage}\n        </Alert>\n      )}\n    </Box>\n  );\n};\n","import React, { FC } from 'react';\nimport { BoxProps, Button, FormControl, FormLabel, Input, InputGroup, InputRightElement } from '@chakra-ui/core';\n\nconst MIN_LENGTH_PASSWORD = 8;\nconst MAX_LENGTH_PASSWORD = 64;\n\ntype Props = {\n  containerStyles: BoxProps;\n  isPasswordVisible: boolean;\n  password: string;\n  setIsPasswordVisible: (isPasswordVisible: Props['isPasswordVisible']) => void;\n  setPassword: (password: Props['password']) => void;\n};\n\nexport const PasswordInput: FC<Props> = ({\n  containerStyles,\n  isPasswordVisible,\n  password,\n  setIsPasswordVisible,\n  setPassword,\n}) => (\n  <FormControl {...containerStyles}>\n    <FormLabel htmlFor='password'>Password</FormLabel>\n    <InputGroup size='md'>\n      <Input\n        id='password'\n        isRequired\n        maxLength={MAX_LENGTH_PASSWORD}\n        minLength={MIN_LENGTH_PASSWORD}\n        // @ts-ignore\n        onChange={({ target }): void => {\n          setPassword(target.value);\n        }}\n        value={password}\n        type={isPasswordVisible ? 'text' : 'password'}\n      />\n      <InputRightElement width='4.5rem'>\n        <Button\n          aria-label='toggle password visibility'\n          height='65%'\n          onClick={(): void => {\n            setIsPasswordVisible(!isPasswordVisible);\n          }}\n          variant='outline'\n          size='sm'\n        >\n          {isPasswordVisible ? 'Hide' : 'Show'}\n        </Button>\n      </InputRightElement>\n    </InputGroup>\n  </FormControl>\n);\n","const getEndpointURL = (): string => 'http://localhost:8080';\n\nexport function fetch<D>(\n  path: string,\n  options: {\n    fetchOptions: Parameters<typeof window.fetch>[1];\n    onEnd?: () => void;\n    onFailure: (error: { errorMessage: string }) => void;\n    onStart?: () => void;\n    onSuccess: (data: D) => void;\n  },\n): Promise<void> {\n  options.onStart?.();\n\n  return window\n    .fetch(getEndpointURL() + path, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      ...options.fetchOptions,\n    })\n    .then((response: Response) => {\n      return response.json().then((json) => {\n        if (response.ok) {\n          return json;\n        }\n\n        throw json;\n      });\n    })\n    .then((json: D) => {\n      options.onSuccess(json);\n    })\n    .catch((error) => {\n      options.onFailure({\n        errorMessage: error.errorMessage || 'An unknown error has occured.',\n      });\n    })\n    .finally(() => {\n      options.onEnd?.();\n    });\n}\n"],"sourceRoot":""}