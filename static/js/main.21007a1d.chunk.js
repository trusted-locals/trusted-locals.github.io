(this["webpackJsonptrusted-locals-frontend"]=this["webpackJsonptrusted-locals-frontend"]||[]).push([[0],{108:function(e,n,t){"use strict";t.r(n);var a,r=t(1),o=t.n(r),c=t(54),i=t.n(c),l=t(19),u=t(29),d=t(41),s=t(27),f=t(114),m=t(8),g=t(53),b=t(86),p=function(){var e=Object(r.useState)(!1),n=Object(g.a)(e,2),t=n[0],a=n[1];return Object(r.useEffect)((function(){var e=setTimeout((function(){return a(!0)}),500);return function(){clearTimeout(e)}}),[]),o.a.createElement(o.a.Fragment,null,t&&o.a.createElement(b.a,{label:"Loading..."}))},h=t(25),y=function(e){var n=e.children,t=e.lazyload,a=e.path,c=e.redirect,i=Object(l.c)(h.g);if("logged-in"===(null===c||void 0===c?void 0:c.when)&&i||"logged-out"===(null===c||void 0===c?void 0:c.when)&&!i)return o.a.createElement(d.a,{to:{pathname:null===c||void 0===c?void 0:c.path}});var u=o.a.createElement(d.b,{path:a||""},n);return t?o.a.createElement(r.Suspense,{fallback:o.a.createElement(p,null)},u):u},E=t(113),O=t(85),j=t(14),v=t(44),w=t(22),k=t(17),S=Object(w.b)("".concat("feed","/loadRequested"),(function(e){return Promise.resolve([{a:!0}])})),z=Object(w.c)({name:"feed",initialState:{categories:["advice","grocery","medical_supply","news"].reduce((function(e,n){return Object(v.a)({},e,Object(j.a)({},n,{async:{error:null,loading:"idle"},posts:null}))}),{})},reducers:{},extraReducers:(a={},Object(j.a)(a,S.pending.type,(function(e,n){var t=n.meta.arg,a=e.categories[t].async;"idle"===a.loading&&(a.loading="pending")})),Object(j.a)(a,S.fulfilled.type,(function(e,n){var t=n.meta.arg,a=e.categories[t],r=a.async;"pending"===r.loading&&(r.loading="idle",a.posts=n.payload)})),Object(j.a)(a,S.rejected.type,(function(e,n){var t=n.meta.arg,a=e.categories[t].async;"pending"===a.loading&&(a.loading="idle",a.error=n.error.message)})),a)}),x=z.reducer,T=function(e){var n=e.category,t=Object(l.b)(),a=Object(l.c)((function(e){return function(e,n){return Object(k.a)((function(e){return e.feed.categories}),(function(e){return e[n]}))(e)}(e,n)})),c=a.async,i=a.posts;return Object(r.useEffect)((function(){null===i&&t(S(n))}),[n,t,i]),c.error?o.a.createElement("h1",null,"An error occured"):"pending"===c.loading?o.a.createElement("h1",null,"Loading..."):o.a.createElement(m.a,{paddingX:4},n," feed")},A=t(109),L=t(71),I=t(111),C=t(69),P=t(52),N=t(74),R=t(51),W=function(){var e=Object(l.c)(h.h);return null===e?null:o.a.createElement(A.a,{as:"a",fontWeight:"semibold",textDecoration:"underline"},e.cityName)},B=function(e){var n=Object(l.c)(h.h);return null===n?o.a.createElement(m.a,R.a,o.a.createElement("p",null,"Sign in to vote and contribute."),o.a.createElement(u.b,{to:"/account/login"},o.a.createElement(L.a,{marginTop:4,size:"sm",variantColor:"blue"},"Sign in"))):o.a.createElement(m.a,{paddingX:4},o.a.createElement(A.a,{color:"gray.600",fontSize:"lg"},"Good morning, ",n.firstName||n.cityName),o.a.createElement(A.a,{color:"gray.600",fontSize:"lg",marginTop:1},"Here are the latest for ",o.a.createElement(W,null)),o.a.createElement(I.a,{marginTop:4},o.a.createElement(C.a,null,o.a.createElement(P.a,{color:"gray.400",name:"search"})),o.a.createElement(N.a,{placeholder:"Use keywords to search for information",type:"text"})))},J=function(){return getComputedStyle(document.querySelector("body"))["font-size"]},M=[{category:"news",id:"tabs-news-tab",name:"News",to:"/feed/news"},{category:"medical_supply",id:"tabs-medical-supply-tab",name:"Medical Supply",to:"/feed/medical-supply"},{category:"grocery",id:"tabs-grocery-tab",name:"Grocery",to:"/feed/grocery"},{category:"advice",id:"tabs-advice-tab",name:"Advice",to:"/feed/advice"}],D=function(){var e=Object(d.g)().pathname,n=function(e){return e/parseFloat(J())}(Object(O.a)(0,{leading:!0,wait:250}))<=30?"sm":"md";return o.a.createElement(o.a.Fragment,null,o.a.createElement(B,null),o.a.createElement(E.e,{marginTop:6,size:n},o.a.createElement(E.c,{id:"tabs"},M.map((function(n){var t=n.id,a=n.name,r=n.to;return o.a.createElement(E.a,{"aria-controls":"tabs","aria-selected":e===r,as:u.b,id:t,key:a,tabIndex:0,to:r},a)}))),o.a.createElement(E.d,{marginTop:8},o.a.createElement(d.d,null,M.map((function(e){var n=e.category,t=e.to;return o.a.createElement(d.b,{exact:!0,key:n,path:t},o.a.createElement(T,{category:n}))})),o.a.createElement(d.a,{from:"/",to:"/feed/news"})))))},F=t(112),H=function(e){var n=e.ariaLabel,t=e.icon,a=e.isActive,r=e.name,c=e.to;return o.a.createElement(u.b,{to:c},o.a.createElement(m.a,{alignItems:"center",display:"flex",flexDirection:"column",paddingY:2},o.a.createElement(F.a,{"aria-label":n,as:"span",icon:t,isActive:a,size:"md",variant:"link",variantColor:"gray"}),o.a.createElement(A.a,{as:"span",color:a?"black":"gray.600",fontSize:"sm"},r)))},U=Object(r.lazy)((function(){return t.e(5).then(t.bind(null,124)).then((function(e){return{default:e.Submit}}))})),_=Object(r.lazy)((function(){return t.e(8).then(t.bind(null,125)).then((function(e){return{default:e.Profile}}))})),X=Object(r.lazy)((function(){return t.e(6).then(t.bind(null,126)).then((function(e){return{default:e.Account}}))})),q=Object(r.lazy)((function(){return t.e(3).then(t.bind(null,120)).then((function(e){return{default:e.Login}}))})),G=Object(r.lazy)((function(){return t.e(9).then(t.bind(null,121)).then((function(e){return{default:e.ResetPassword}}))})),Y=Object(r.lazy)((function(){return t.e(4).then(t.bind(null,122)).then((function(e){return{default:e.Registration}}))})),$=Object(r.lazy)((function(){return t.e(7).then(t.bind(null,123)).then((function(e){return{default:e.Page404}}))})),K={home:{ariaLabel:"home button",icon:"mdHome",name:"Home",to:"/feed"},submit:{ariaLabel:"submit button",icon:"mdAdd",name:"Submit",to:"/submit"},profile:{ariaLabel:"profile button",icon:"mdPerson",name:"Profile",to:"/profile"},account:{ariaLabel:"account button",icon:"mdPerson",name:"Account",to:"/account"}},Q={home:K.home,submit:K.submit,profile:K.profile},V={home:K.home,submit:K.submit,account:K.account},Z=function(){var e,n=Object(d.g)(),t=Object(l.c)(h.g),a=(e=t,Object.values(e?Q:V));return o.a.createElement(o.a.Fragment,null,o.a.createElement(d.d,null,o.a.createElement(y,{lazyload:!1,path:"/feed"},o.a.createElement(D,null)),o.a.createElement(y,{lazyload:!0,path:"/submit"},o.a.createElement(U,null)),o.a.createElement(y,{lazyload:!0,path:"/profile",redirect:{path:"/account",when:"logged-out"}},o.a.createElement(_,null)),o.a.createElement(y,{lazyload:!0,path:"/account/reset-password",redirect:{path:"/profile",when:"logged-in"}},o.a.createElement(G,null)),o.a.createElement(y,{lazyload:!0,path:"/account/login",redirect:{path:"/profile",when:"logged-in"}},o.a.createElement(q,null)),o.a.createElement(y,{lazyload:!0,path:"/account/register",redirect:{path:"/profile",when:"logged-in"}},o.a.createElement(Y,null)),o.a.createElement(y,{lazyload:!0,path:"/account",redirect:{path:"/profile",when:"logged-in"}},o.a.createElement(X,null)),o.a.createElement(d.a,{exact:!0,from:"/",to:"/feed"}),o.a.createElement(y,{lazyload:!0,path:null},o.a.createElement($,null))),o.a.createElement("nav",null,o.a.createElement(m.a,{backgroundColor:"white",borderTop:"1px solid",borderColor:"gray.300",bottom:"0",display:"flex",position:"fixed",width:"100%",zIndex:1},a.map((function(e){return o.a.createElement(m.a,{flex:"1 1 0",key:e.name},o.a.createElement(H,Object.assign({},e,{isActive:n.pathname.startsWith(e.to)})))})))))},ee=t(40),ne=function(){var e=Object(l.b)();return Object(r.useEffect)((function(){var n=!!localStorage.getItem(h.a);e(Object(h.b)({authTokenExists:n}))}),[e]),o.a.createElement(s.a,{theme:R.b},o.a.createElement(f.a,null),o.a.createElement(u.a,{basename:ee.a},o.a.createElement(d.c,{history:ee.b},o.a.createElement(m.a,{marginTop:4},o.a.createElement(Z,null)))))},te=t(16),ae=t(33),re=t(70),oe=t.n(re),ce=t(75),ie={key:"root",storage:oe.a,blacklist:["feed","submit","user"]},le={key:"user",storage:oe.a,whitelist:["profile"]},ue=Object(te.c)({feed:x,submit:ce.b,user:Object(ae.g)(le,h.i)}),de=Object(ae.g)(ie,ue),se=Object(w.a)({reducer:de,middleware:Object(w.d)({serializableCheck:{ignoredActions:[ae.a,ae.f,ae.b,ae.c,ae.d,ae.e]}})}),fe=(Object(ae.h)(se),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function me(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(o.a.createElement(r.StrictMode,null,o.a.createElement(l.a,{store:se},o.a.createElement(ne,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("","/service-worker.js");fe?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):me(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):me(n,e)}))}}()},25:function(e,n,t){"use strict";t.d(n,"a",(function(){return u})),t.d(n,"c",(function(){return s})),t.d(n,"e",(function(){return f})),t.d(n,"b",(function(){return b})),t.d(n,"d",(function(){return p})),t.d(n,"f",(function(){return h})),t.d(n,"g",(function(){return y})),t.d(n,"h",(function(){return E})),t.d(n,"i",(function(){return O}));var a,r=t(14),o=t(22),c=t(17),i=t(50),l=t(40),u="token",d={cityName:"Richmond",email:"foo@bar.com",firstName:"Timothy",lastName:"Doe",postsCount:7,rating:79,username:"foo_bar_123"},s=Object(o.b)("".concat("user","/loggedIn"),(function(e){return Object(i.a)("/user/login",{body:JSON.stringify(e),method:"POST"}).then((function(e){return l.b.push("/feed"),localStorage.setItem(u,e.token),e}))})),f=Object(o.b)("".concat("user","/registered"),(function(e){return Object(i.a)("/user",{body:JSON.stringify(e),method:"POST"}).then((function(e){return l.b.push("/feed"),localStorage.setItem(u,e.token),e}))})),m=Object(o.c)({name:"user",initialState:{async:{error:null,loading:"idle"},isLoggedIn:!1,profile:null},reducers:{authTokenChecked:function(e,n){e.isLoggedIn=n.payload.authTokenExists},loggedOut:function(e){e.profile=null,e.isLoggedIn=!1}},extraReducers:(a={},Object(r.a)(a,s.pending.type,(function(e){"idle"===e.async.loading&&(e.async.loading="pending")})),Object(r.a)(a,s.fulfilled.type,(function(e,n){"pending"===e.async.loading&&(e.async.loading="idle",e.isLoggedIn=!0,e.profile=d)})),Object(r.a)(a,s.rejected.type,(function(e,n){"pending"===e.async.loading&&(e.async.loading="idle",e.async.error=n.error.message)})),Object(r.a)(a,f.pending.type,(function(e){"idle"===e.async.loading&&(e.async.loading="pending")})),Object(r.a)(a,f.fulfilled.type,(function(e,n){"pending"===e.async.loading&&(e.async.loading="idle",e.isLoggedIn=!0,e.profile=d)})),Object(r.a)(a,f.rejected.type,(function(e,n){"pending"===e.async.loading&&(e.async.loading="idle",e.async.error=n.error.message)})),a)}),g=m.actions,b=g.authTokenChecked,p=g.loggedOut,h=function(e){return Object(c.a)((function(e){return e.user.async}),(function(e){return e}))(e)},y=function(e){return Object(c.a)((function(e){return e.user.isLoggedIn}),(function(e){return e}))(e)},E=function(e){return Object(c.a)((function(e){return e.user.profile}),(function(e){return e}))(e)},O=m.reducer},40:function(e,n,t){"use strict";t.d(n,"a",(function(){return r})),t.d(n,"b",(function(){return o}));var a=t(21),r="/",o=Object(a.b)({basename:r})},50:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var a=t(44),r={credentials:"include",headers:{"Content-Type":"application/json"}};function o(e,n){return window.fetch("https://ec2-54-89-76-249.compute-1.amazonaws.com"+e,Object(a.a)({},r,{},n)).then((function(e){return e.json().then((function(n){if(e.ok)return n;throw n}))})).catch((function(e){throw new Error(e.errorMessage||"An unknown error has occured.")}))}},51:function(e,n,t){"use strict";t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return d}));var a=t(44),r=t(1),o=t.n(r),c=t(60),i=t(68),l=t(87),u={marginTop:4,marginX:"auto",width:["80%","90%","90%","80%","70%"]},d=Object(a.a)({},l.a,{icons:Object(a.a)({},l.a.icons,{ioMdEye:{path:o.a.createElement(i.a,null),viewBox:"0 0 16 16"},ioMdEyeOff:{path:o.a.createElement(i.b,null),viewBox:"0 0 16 16"},mdAdd:{path:o.a.createElement(c.a,null),viewBox:"0 0 16 16"},mdHome:{path:o.a.createElement(c.b,null),viewBox:"0 0 16 16"},mdPerson:{path:o.a.createElement(c.c,null),viewBox:"0 0 16 16"}})})},75:function(e,n,t){"use strict";t.d(n,"c",(function(){return u})),t.d(n,"a",(function(){return s})),t.d(n,"b",(function(){return f}));var a,r=t(14),o=t(22),c=t(17),i=t(50),l=t(40),u=Object(o.b)("".concat("submit","/submitted"),(function(e){return Object(i.a)("/TODO:Route",{body:JSON.stringify(e),method:"POST"}).then((function(e){return l.b.push("/feed"),e}))})),d=Object(o.c)({name:"submit",initialState:{async:{error:null,loading:"idle"}},reducers:{},extraReducers:(a={},Object(r.a)(a,u.pending.type,(function(e){"idle"===e.async.loading&&(e.async.loading="pending")})),Object(r.a)(a,u.fulfilled.type,(function(e,n){"pending"===e.async.loading&&(e.async.loading="idle")})),Object(r.a)(a,u.rejected.type,(function(e,n){"pending"===e.async.loading&&(e.async.loading="idle",e.async.error=n.error.message)})),a)}),s=function(e){return Object(c.a)((function(e){return e.submit.async}),(function(e){return e}))(e)},f=d.reducer},88:function(e,n,t){e.exports=t(108)}},[[88,1,2]]]);
//# sourceMappingURL=main.21007a1d.chunk.js.map