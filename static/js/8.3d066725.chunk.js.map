{"version":3,"sources":["../node_modules/@chakra-ui/core/dist/es/Image/index.js","../node_modules/@chakra-ui/core/dist/es/Divider/index.js","features/user/Profile.tsx"],"names":["NativeImage","forwardRef","_ref2","ref","htmlWidth","htmlHeight","alt","props","_objectWithoutPropertiesLoose","jsx","_extends","width","height","Image","_ref3","imageProps","src","fallbackSrc","onError","onLoad","ignoreFallback","hasLoaded","_ref","isMounted","useRef","_useState","useState","setHasLoaded","useEffect","image","window","onload","event","current","useHasImageLoaded","Box","as","displayName","Divider","orientation","borderProps","borderLeft","mx","borderBottom","my","border","opacity","borderColor","Profile","history","useHistory","userNameParam","location","pathname","split","isOwnProfile","undefined","username","selector","selectOwnProfile","selectOtherProfile","dispatch","useDispatch","profile","useSelector","responsiveBoxProps","alignItems","display","flexDirection","marginTop","rounded","size","Text","color","fontWeight","firstName","lastName","cityName","justifyContent","marginRight","textAlign","postsCount","rating","Button","onClick","push","localStorage","removeItem","LOCAL_STORAGE_AUTH_TOKEN_KEY","loggedOut","variant","variantColor"],"mappings":"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","file":"static/js/8.3d066725.chunk.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\n\n/** @jsx jsx */\nimport { jsx } from \"@emotion/core\";\nimport { useEffect, useState, forwardRef, useRef } from \"react\";\nimport Box from \"../Box\";\nexport var useHasImageLoaded = function useHasImageLoaded(_ref) {\n  var src = _ref.src,\n      onLoad = _ref.onLoad,\n      onError = _ref.onError;\n  var isMounted = useRef(true);\n\n  var _useState = useState(false),\n      hasLoaded = _useState[0],\n      setHasLoaded = _useState[1];\n\n  useEffect(function () {\n    if (!src) {\n      return;\n    }\n\n    var image = new window.Image();\n    image.src = src;\n\n    image.onload = function (event) {\n      if (isMounted.current) {\n        setHasLoaded(true);\n        onLoad && onLoad(event);\n      }\n    };\n\n    image.onError = function (event) {\n      if (isMounted.current) {\n        setHasLoaded(false);\n        onError && onError(event);\n      }\n    };\n  }, [src, onLoad, onError]);\n  useEffect(function () {\n    return function () {\n      isMounted.current = false;\n    };\n  }, []);\n  return hasLoaded;\n};\nvar NativeImage = forwardRef(function (_ref2, ref) {\n  var htmlWidth = _ref2.htmlWidth,\n      htmlHeight = _ref2.htmlHeight,\n      alt = _ref2.alt,\n      props = _objectWithoutPropertiesLoose(_ref2, [\"htmlWidth\", \"htmlHeight\", \"alt\"]);\n\n  return jsx(\"img\", _extends({\n    width: htmlWidth,\n    height: htmlHeight,\n    ref: ref,\n    alt: alt\n  }, props));\n});\nvar Image = forwardRef(function (_ref3, ref) {\n  var src = _ref3.src,\n      fallbackSrc = _ref3.fallbackSrc,\n      onError = _ref3.onError,\n      onLoad = _ref3.onLoad,\n      ignoreFallback = _ref3.ignoreFallback,\n      props = _objectWithoutPropertiesLoose(_ref3, [\"src\", \"fallbackSrc\", \"onError\", \"onLoad\", \"ignoreFallback\"]);\n\n  var hasLoaded = useHasImageLoaded({\n    src: src,\n    onLoad: onLoad,\n    onError: onError\n  });\n  var imageProps;\n\n  if (ignoreFallback) {\n    imageProps = {\n      src: src,\n      onLoad: onLoad,\n      onError: onError\n    };\n  } else {\n    imageProps = {\n      src: hasLoaded ? src : fallbackSrc\n    };\n  }\n\n  return jsx(Box, _extends({\n    as: NativeImage,\n    ref: ref\n  }, imageProps, props));\n});\nImage.displayName = \"Image\";\nexport default Image;","import _extends from \"@babel/runtime/helpers/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/objectWithoutPropertiesLoose\";\n\n/** @jsx jsx */\nimport { jsx } from \"@emotion/core\";\nimport Box from \"../Box\";\nimport { forwardRef } from \"react\";\nvar Divider = forwardRef(function (_ref, ref) {\n  var orientation = _ref.orientation,\n      props = _objectWithoutPropertiesLoose(_ref, [\"orientation\"]);\n\n  var borderProps = orientation === \"vertical\" ? {\n    borderLeft: \"0.0625rem solid\",\n    height: \"auto\",\n    mx: 2\n  } : {\n    borderBottom: \"0.0625rem solid\",\n    width: \"auto\",\n    my: 2\n  };\n  return jsx(Box, _extends({\n    ref: ref,\n    as: \"hr\",\n    \"aria-orientation\": orientation,\n    border: \"0\",\n    opacity: \"0.6\"\n  }, borderProps, {\n    borderColor: \"inherit\"\n  }, props));\n});\nexport default Divider;","import React, { FC } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { Box, Button, Divider, Image, Text } from '@chakra-ui/core';\n\nimport {\n  LOCAL_STORAGE_AUTH_TOKEN_KEY,\n  loggedOut,\n  selectOtherProfile,\n  selectOwnProfile,\n  Profile as ProfileType,\n  OtherProfile,\n} from './userSlice';\n\nimport { responsiveBoxProps } from '../../app/styles';\n\nimport { RootState } from '../../app/store';\n\nexport const Profile: FC<{}> = () => {\n  const history = useHistory();\n\n  const userNameParam: string | undefined = history.location.pathname.split('/profile/')[1];\n  const isOwnProfile = userNameParam === 'me' || userNameParam === undefined || userNameParam === '';\n  const username = isOwnProfile ? 'me' : userNameParam;\n\n  const selector: (state: RootState) => (ProfileType | null) | (OtherProfile | undefined) = isOwnProfile\n    ? selectOwnProfile\n    : selectOtherProfile(username);\n\n  const dispatch = useDispatch();\n  const profile = useSelector(selector);\n\n  if (!profile) {\n    // TODO: Fetch profile.\n    return <h3>Should fetch data here. Will do that later.</h3>;\n  }\n\n  return (\n    <Box {...responsiveBoxProps}>\n      <Box>\n        <Box alignItems='center' display='flex' flexDirection='column' marginTop={8}>\n          <Image\n            alt='profile image'\n            border='1px solid'\n            borderColor='gray.400'\n            rounded='full'\n            size='64px'\n            src='https://via.placeholder.com/64'\n          />\n          <Text color='gray.600' fontWeight='semibold' marginTop={2}>\n            {profile.firstName ? `${profile.firstName} ${profile.lastName}` : profile.username}\n          </Text>\n          <Text color='gray.500'>{profile.cityName}</Text>\n        </Box>\n        <Box color='gray.500' display='flex' justifyContent='center' marginTop={4}>\n          <Box marginRight={6}>\n            <Text textAlign='center'>{profile.postsCount}</Text>\n            <Text>Posts</Text>\n          </Box>\n          <Box>\n            <Text textAlign='center'>{profile.rating}%</Text>\n            <Text>Rating</Text>\n          </Box>\n        </Box>\n      </Box>\n      <Divider borderColor='gray.400' />\n      {isOwnProfile && (\n        <Box marginTop={8}>\n          <Button\n            onClick={(): void => {\n              history.push('/account');\n              localStorage.removeItem(LOCAL_STORAGE_AUTH_TOKEN_KEY);\n              dispatch(loggedOut());\n            }}\n            variant='ghost'\n            variantColor='blue'\n          >\n            Log out\n          </Button>\n        </Box>\n      )}\n    </Box>\n  );\n};\n"],"sourceRoot":""}