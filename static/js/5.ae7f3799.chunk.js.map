{"version":3,"sources":["pages/RegistrationPage.tsx","components/PasswordInput.tsx","utils/fetch.ts"],"names":["containerStyles","marginTop","RegistrationPage","history","useHistory","useState","name","setName","email","setEmail","password","setPassword","isPasswordVisible","setIsPasswordVisible","isLoading","setIsLoading","errorMessage","setErrorMessage","maxWidth","onSubmit","e","preventDefault","fetch","fetchOptions","body","JSON","stringify","country","method","onStart","onSuccess","_data","push","onFailure","onEnd","htmlFor","id","isRequired","maxLength","minLength","onChange","target","value","type","variantColor","status","variant","PasswordInput","size","width","aria-label","height","onClick","path","options","window","credentials","headers","then","response","json","ok","catch","error","finally"],"mappings":"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","file":"static/js/5.ae7f3799.chunk.js","sourcesContent":["import React, { FC, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Alert, AlertIcon, Box, Button, FormControl, FormLabel, Input } from '@chakra-ui/core';\n\nimport { PasswordInput } from '../components/PasswordInput';\n\nimport { fetch } from '../utils/fetch';\n\nconst MIN_LENGTH_USERNAME = 3;\nconst MAX_LENGTH_USERNAME = 16;\n\nconst containerStyles = {\n  marginTop: 4,\n};\n\nexport const RegistrationPage: FC = () => {\n  const history = useHistory();\n\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n\n  const [isPasswordVisible, setIsPasswordVisible] = useState(false);\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n\n  return (\n    <Box maxWidth='500px'>\n      <form\n        onSubmit={(e): void => {\n          e.preventDefault();\n\n          fetch('/user', {\n            fetchOptions: {\n              body: JSON.stringify({\n                // TODO: Country/City in registration flow\n                country: 'test-country',\n                email,\n                name,\n                password,\n              }),\n              method: 'POST',\n            },\n            onStart: () => {\n              setIsLoading(true);\n            },\n            onSuccess: (_data: { success: boolean }) => {\n              history.push('/');\n            },\n            onFailure: ({ errorMessage }) => {\n              setErrorMessage(errorMessage);\n            },\n            onEnd: () => {\n              setIsLoading(false);\n            },\n          });\n        }}\n      >\n        <FormControl {...containerStyles}>\n          <FormLabel htmlFor='username'>Username</FormLabel>\n          <Input\n            id='username'\n            isRequired\n            maxLength={MAX_LENGTH_USERNAME}\n            minLength={MIN_LENGTH_USERNAME}\n            // @ts-ignore\n            onChange={({ target }): void => {\n              setName(target.value);\n            }}\n            type='text'\n            value={name}\n          />\n        </FormControl>\n        <FormControl {...containerStyles}>\n          <FormLabel htmlFor='email'>Email address</FormLabel>\n          <Input\n            isRequired\n            id='email'\n            // @ts-ignore\n            onChange={({ target }): void => {\n              setEmail(target.value);\n            }}\n            type='email'\n            value={email}\n          />\n        </FormControl>\n        <PasswordInput\n          containerStyles={containerStyles}\n          isPasswordVisible={isPasswordVisible}\n          password={password}\n          setIsPasswordVisible={setIsPasswordVisible}\n          setPassword={setPassword}\n        />\n        <Button isLoading={isLoading} marginTop={6} variantColor='teal' type='submit'>\n          Register\n        </Button>\n      </form>\n      {errorMessage && (\n        <Alert marginTop={6} status='error' variant='left-accent'>\n          <AlertIcon />\n          {errorMessage}\n        </Alert>\n      )}\n    </Box>\n  );\n};\n","import React, { FC } from 'react';\nimport { BoxProps, Button, FormControl, FormLabel, Input, InputGroup, InputRightElement } from '@chakra-ui/core';\n\nconst MIN_LENGTH_PASSWORD = 8;\nconst MAX_LENGTH_PASSWORD = 64;\n\ntype Props = {\n  containerStyles: BoxProps;\n  isPasswordVisible: boolean;\n  password: string;\n  setIsPasswordVisible: (isPasswordVisible: Props['isPasswordVisible']) => void;\n  setPassword: (password: Props['password']) => void;\n};\n\nexport const PasswordInput: FC<Props> = ({\n  containerStyles,\n  isPasswordVisible,\n  password,\n  setIsPasswordVisible,\n  setPassword,\n}: Props) => (\n  <FormControl {...containerStyles}>\n    <FormLabel htmlFor='password'>Password</FormLabel>\n    <InputGroup size='md'>\n      <Input\n        id='password'\n        isRequired\n        maxLength={MAX_LENGTH_PASSWORD}\n        minLength={MIN_LENGTH_PASSWORD}\n        // @ts-ignore\n        onChange={({ target }): void => {\n          setPassword(target.value);\n        }}\n        value={password}\n        type={isPasswordVisible ? 'text' : 'password'}\n      />\n      <InputRightElement width='4.5rem'>\n        <Button\n          aria-label='toggle password visibility'\n          height='65%'\n          onClick={(): void => {\n            setIsPasswordVisible(!isPasswordVisible);\n          }}\n          variant='outline'\n          size='sm'\n        >\n          {isPasswordVisible ? 'Hide' : 'Show'}\n        </Button>\n      </InputRightElement>\n    </InputGroup>\n  </FormControl>\n);\n","const getEndpointURL = (): string => 'http://localhost:8080';\n\nexport function fetch<D>(\n  path: string,\n  options: {\n    fetchOptions: Parameters<typeof window.fetch>[1];\n    onEnd?: () => void;\n    onFailure: (error: { errorMessage: string }) => void;\n    onStart?: () => void;\n    onSuccess: (data: D) => void;\n  },\n): Promise<void> {\n  options.onStart?.();\n\n  return window\n    .fetch(getEndpointURL() + path, {\n      credentials: 'include',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      ...options.fetchOptions,\n    })\n    .then((response: Response) => {\n      return response.json().then((json) => {\n        if (response.ok) {\n          return json;\n        }\n\n        throw json;\n      });\n    })\n    .then((json: D) => {\n      options.onSuccess(json);\n    })\n    .catch((error) => {\n      options.onFailure({\n        errorMessage: error.errorMessage || 'An unknown error has occured.',\n      });\n    })\n    .finally(() => {\n      options.onEnd?.();\n    });\n}\n"],"sourceRoot":""}